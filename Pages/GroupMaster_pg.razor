@page "/groupmaster_pg/{vCompType}"
@page "/groupmaster_pg"
@inject HttpClient Http
@using DigiEquipSys.Services
@using DigiEquipSys.Models
@using DigiEquipSys.Interfaces
@inject IGroupMasterService myGroupMaster
@inject NavigationManager UriHelper
@inject ISessionStorageService sessionStorage
@inject IJSRuntime JSRuntime

<h3 class="page-title">Group Master</h3>
<style>
    .e-grid .e-headercelldiv {
        font-weight: bold !important;
        background-color: #604B7C;
        color: white
    }
</style>
<style>
    .e-spinner-pane .e-spinner-inner .e-spin-Bootstrap5 {
        stroke: red;
    }
</style>
<SfSpinner @bind-Visible="@SpinnerVisible" Type="@SpinnerType.Bootstrap5" Size="50">
</SfSpinner>
@if (GroupList != null)
{
    <div class="col-lg-12 Control-section">
        <div class="content-wrapper">
            <div class="row">
                <SfGrid @ref="GroupMasterGrid" Height="550px"
                    DataSource="@GroupList" 
                    AllowSorting="true" AllowFiltering="true" AllowPaging="true" AllowResizing="true" AllowReordering="true" AllowExcelExport="true"
                    ContextMenuItems="@(new List<object>() {"AutoFit", "AutoFitAll", "SortAscending", "SortDescending","Copy", "ExcelExport","CsvExport", "FirstPage", "PrevPage","LastPage", "NextPage"})"
                    Toolbar="@(new List<string>() { "Add", "Delete", "Edit", "Cancel", "Update", "Print" })">
                    <GridEvents OnActionBegin="ActionBeginHandler" TValue="GroupMaster"></GridEvents>
                    <GridFilterSettings Type="Syncfusion.Blazor.Grids.FilterType.CheckBox"></GridFilterSettings>
                    <GridEditSettings AllowAdding="true" AllowEditing="true" AllowDeleting="true" NewRowPosition="NewRowPosition.Bottom" Mode=EditMode.Normal Dialog="DialogParams"></GridEditSettings>
                    <GridPageSettings PageSize="50" PageSizes="@(new int[] {20, 30, 50, 100, 200, 400,500})"></GridPageSettings>
                    <GridTemplates>
                        <EmptyRecordTemplate>
                            <span>No Records Found</span>
                        </EmptyRecordTemplate>
                    </GridTemplates>
                    <GridColumns>
                        <GridColumn Field="@nameof(GroupMaster.GrpId)"
                                HeaderText="Id"
                                IsIdentity="true"
                                IsPrimaryKey="true"
                                Visible=false>
                        </GridColumn>

                        <GridColumn Field="@nameof(GroupMaster.GrpNo)"
                                HeaderText="Group No."
                                Width="50"
                                AllowEditing="@IsEdit">
                        </GridColumn>

                        <GridColumn Field="@nameof(GroupMaster.GrpDesc)"
                                HeaderText="Group Desc"
                                Width="150">
                        </GridColumn>

                        <GridColumn Field="@nameof(GroupMaster.GrpShortDesc)"
                                HeaderText="Short Desc"
                                Width="100">
                        </GridColumn>

                    </GridColumns>
                </SfGrid>
                <br />
                <WarningPage @ref="Warning" WarningHeaderMessage="@WarningHeaderMessage" WarningContentMessage="@WarningContentMessage" />
                <ConfirmPage @ref="DialogDelete" ConfirmHeaderMessage="@ConfirmHeaderMessage" ConfirmContentMessage="@ConfirmContentMessage" ConfirmationChanged="ConfirmDelete" />
                @*<div class="col-xs-12 col-sm-12 col-lg-6 col-md-6">
                    <SfButton @onclick="@((args) => UriHelper.NavigateTo("gentrad"))" IsPrimary="true" IconPosition=@IconPosition.Left>Back</SfButton>
                </div>*@
                <a href="#" @onclick="NavigateToPrevious" CssClass="e-link">
                    <SfButton CssClass="e-small e-success">BACK</SfButton>
                </a>
            </div>
        </div>
    </div>
}

